
# Implementação de Serviço API e Alterações em Componentes no Projeto React

Neste tutorial, vamos integrar o serviço de API utilizando Axios, fazer mudanças nos componentes para suportar dados dinâmicos e implementar o consumo do serviço na página `Utility`. Cada mudança será explicada e detalhada.

## Passo a Passo

### 1. Criar a pasta `helpers` e configurar o Axios

Primeiro, crie a pasta `helpers` dentro do diretório `src`, onde organizaremos os serviços da API.

#### Criação da pasta `Api`:

Dentro de `helpers`, crie a pasta `Api` e adicione o arquivo `index.ts` com o seguinte código:

```ts
import axios from 'axios';

export const Api = axios.create({ baseURL: 'http://localhost:3001' });
```

### Explicação:

Aqui, configuramos o Axios, uma biblioteca para fazer requisições HTTP, criando uma instância chamada `Api`. A URL base das requisições será `http://localhost:3001`. Dessa forma, todas as requisições para diferentes endpoints utilizarão essa base URL.

### 2. Criar o Serviço `UtilityService`

Agora, dentro de `helpers`, crie a pasta `Services` e, dentro dela, a pasta `UtilityService`. No arquivo `index.ts`, insira o seguinte código:

```ts
import { Api } from "../../Api";

export class UtilityService {
  public async getAll() {
    const response = await Api.get("/utility");
    return response;
  }

  public async getById() {
    const response = await Api.get("/utility/:id");
    return response;
  }

  public async patch(id: string) {
    const response = await Api.patch(`/utility/${id}`);
    return response;
  }

  public async post(id: string) {
    const response = await Api.post(`/utility/${id}`);
    return response;
  }

  public async delete(id: string) {
    const response = await Api.delete(`/utility/${id}`);
    return response;
  }
}
```

### Explicação:

O `UtilityService` define várias funções para interagir com a API do backend. Ele utiliza o objeto `Api` criado anteriormente e define métodos como `getAll()`, `getById()`, `post()`, `patch()`, e `delete()`, cada um responsável por diferentes operações de CRUD no endpoint `/utility`.

### 3. Modificar a Interface para o Componente `Card`

Dentro da pasta `interfaces`, modifique o arquivo `index.ts` para incluir uma nova interface para o componente `Card`:

```ts
export interface IModalProps {
  isOpen: boolean;
  onClose: () => void;
}

export interface IHeaderProps {
  isOpen: boolean;
  setIsOpen: React.Dispatch<React.SetStateAction<boolean>>;
  onClose: () => void;
}

export interface ICardProps {
  content: {
    title: string;
    description: string;
    image: string;
  };
}
```

### Explicação:

Aqui, adicionamos a interface `ICardProps`, que define o formato dos dados que o componente `Card` receberá. O `content` deve ter um título, uma descrição e uma imagem, permitindo que o componente mostre dados dinâmicos.

### 4. Modificar o Componente `Card`

No arquivo `index.tsx` do componente `Card`, modifique o código para usar as propriedades dinâmicas da interface:

```ts
import { ICardProps } from "../../interfaces";
import "./style.css";

const Card = ({ content }: ICardProps) => {
  return (
    <div className="card">
      <img
        className="img-card"
        src={content.image}
        alt={`representação ${content.title}`}
      />
      <span className="span-card">Escolta Armada</span>
      <p className="p-card">{content.description}</p>
    </div>
  );
};

export default Card;
```

### Explicação:

Agora o componente `Card` recebe um objeto `content` por meio de `props`, que inclui os valores dinâmicos para `title`, `description`, e `image`. Assim, o componente pode ser reutilizado para renderizar diferentes cards com base nos dados fornecidos.

### 5. Modificar a Página `Utility` para Consumir o Serviço de API

Na página `Utility`, altere o arquivo `index.tsx` para consumir o serviço da API e renderizar os cards dinamicamente:

```ts
import Header from "../../components/Header";
import Main from "../../components/Main";
import Card from "../../components/Card";
import { IHeaderProps } from "../../interfaces";
import { UtilityService } from "../../helpers/Services/UtilityService";
import { useEffect, useState } from "react";

const utilityService = new UtilityService();

const Utility = ({ isOpen, setIsOpen, onClose }: IHeaderProps) => {
  const [cards, setCards] = useState([]);
  
  useEffect(() => {
    utilityService.getAll().then((response) => {
      setCards(response.data);
    });
  });
  
  return (
    <>
      <Header isOpen={isOpen} setIsOpen={setIsOpen} onClose={onClose} />
      <Main>
        {cards.map((element) => {
          return <Card content={element} />;
        })}
      </Main>
    </>
  );
};

export default Utility;
```

### Explicação:

Aqui utilizamos o `UtilityService` para buscar os dados da API com o método `getAll()`. Os dados retornados são armazenados no estado local `cards` usando o hook `useState`. Depois, os dados são mapeados e renderizados como vários componentes `Card` dinâmicos.

---

Com essas modificações, agora o componente `Utility` é capaz de buscar dados da API e renderizar dinamicamente os cartões de serviço. Além disso, o `UtilityService` foi configurado para realizar operações CRUD com a API de backend.
